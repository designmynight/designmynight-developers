<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-gb">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <title>Booking API - DMN developer documentation</title>
    <meta name="generator" content="Hugo 0.22.1" />

    
    <meta name="description" content="Developer documentation for DesignMyNight">
    
    <link rel="canonical" href="https://developers.designmynight.com/api/booking-api/">
    
    <meta name="author" content="DesignMyNight Tech Team">
    

    <meta property="og:url" content="https://developers.designmynight.com/api/booking-api/">
    <meta property="og:title" content="DMN developer documentation">
    <meta property="og:image" content="https://developers.designmynight.com/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="DMN developer documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://developers.designmynight.com/images/favicon.png">
    <link rel="icon" type="image/x-icon" href="https://developers.designmynight.com/images/favicon.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://developers.designmynight.com/fonts/icon.eot?52m981');
        src: url('https://developers.designmynight.com/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('https://developers.designmynight.com/fonts/icon.woff?52m981')
               format('woff'),
             url('https://developers.designmynight.com/fonts/icon.ttf?52m981')
               format('truetype'),
             url('https://developers.designmynight.com/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://developers.designmynight.com/stylesheets/application.css">
    <link rel="stylesheet" href="https://developers.designmynight.com/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://developers.designmynight.com/stylesheets/styles.css">
    <link rel="stylesheet" href="https://developers.designmynight.com/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu%20Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>
    
    
    <script src="https://developers.designmynight.com/javascripts/modernizr.js"></script>

  </head>
  <body class="palette-primary-teal palette-accent-deep purple">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Booking API
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/designmynight/dmn-developers" title="@designmynight/dmn-developers on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://developers.designmynight.com/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://developers.designmynight.com/images/logo.png">
        </div>
      
      <div class="name">
        <strong>DMN developer documentation <span class="version">1.1.0</span></strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Introduction" href="https://developers.designmynight.com/">
	
	Introduction
</a>

  
  
</li>



<li>
  
    



<a  title="    " href="https://developers.designmynight.com/">
	
	    
</a>

  
  
</li>



<li>
  
  <li>
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <span class="section">Soda</span>
      
    
      
    
      
    
      
    
    

    <ul>
      
        
        



<a  title="Voucher widget" href="https://developers.designmynight.com/soda/partner-widget/">
	
	Voucher widget
</a>

  
      
    </ul>
  </li>
  
</li>



<li>
  
  <li>
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <span class="section">Tonic</span>
      
    
    

    <ul>
      
        
        



<a  title="Ticket widget" href="https://developers.designmynight.com/tonic/ticket-widget/">
	
	Ticket widget
</a>

  
      
    </ul>
  </li>
  
</li>



<li>
  
    



<a  title="     " href="https://developers.designmynight.com/">
	
	     
</a>

  
  
</li>



<li>
  
  <li>
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <span class="section">Collins</span>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    

    <ul>
      
        
        



<a  title="Updating Email Settings" href="https://developers.designmynight.com/collins/updating-email-settings/">
	
	Updating Email Settings
</a>

  
      
        
        



<a  title="Collins Booking Widget" href="https://developers.designmynight.com/collins/booking-widget/">
	
	Collins Booking Widget
</a>

  
      
        
        



<a  title="Customising 2nd Iframe" href="https://developers.designmynight.com/collins/customising-2nd-iframe/">
	
	Customising 2nd Iframe
</a>

  
      
        
        



<a  title="Booking URLs" href="https://developers.designmynight.com/collins/booking-url/">
	
	Booking URLs
</a>

  
      
        
        



<a  title="General Enquiry Form" href="https://developers.designmynight.com/collins/general-enquiry-form/">
	
	General Enquiry Form
</a>

  
      
        
        



<a  title="Customising Email Templates" href="https://developers.designmynight.com/collins/customising-email-templates/">
	
	Customising Email Templates
</a>

  
      
        
        



<a  title="Taking Bookings from Google" href="https://developers.designmynight.com/collins/taking-bookings-from-google/">
	
	Taking Bookings from Google
</a>

  
      
        
        



<a  title="Tracking" href="https://developers.designmynight.com/collins/tracking/">
	
	Tracking
</a>

  
      
        
        



<a  title="Customer Widget" href="https://developers.designmynight.com/collins/customer-widget/">
	
	Customer Widget
</a>

  
      
    </ul>
  </li>
  
</li>



<li>
  
    



<a  title=" " href="https://developers.designmynight.com/">
	
	 
</a>

  
  
</li>



<li>
  
  <li>
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <span class="section">Api</span>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    

    <ul>
      
        
        



<a  title="API Basics" href="https://developers.designmynight.com/api/api-basics/">
	
	API Basics
</a>

  
      
        
        



<a class="current" title="Booking API" href="https://developers.designmynight.com/api/booking-api/">
	
	Booking API
</a>


<ul id="scrollspy">
</ul>
  
      
        
        



<a  title="Bookings search" href="https://developers.designmynight.com/api/bookings-search/">
	
	Bookings search
</a>

  
      
        
        



<a  title="Users API" href="https://developers.designmynight.com/api/users-api/">
	
	Users API
</a>

  
      
        
        



<a  title="Offers API" href="https://developers.designmynight.com/api/offers-api/">
	
	Offers API
</a>

  
      
        
        



<a  title="Venues API" href="https://developers.designmynight.com/api/venues-api/">
	
	Venues API
</a>

  
      
        
        



<a  title="Venue Groups API" href="https://developers.designmynight.com/api/venue-groups/">
	
	Venue Groups API
</a>

  
      
        
        



<a  title="Event Guests API" href="https://developers.designmynight.com/api/event-guests-api/">
	
	Event Guests API
</a>

  
      
        
        



<a  title="API FAQs" href="https://developers.designmynight.com/api/api-faqs/">
	
	API FAQs
</a>

  
      
    </ul>
  </li>
  
</li>



<li>
  
    



<a  title="        " href="https://developers.designmynight.com/">
	
	        
</a>

  
  
</li>



<li>
  
  <li>
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <span class="section">Epos-Crm-Integrations</span>
      
    
      
    
      
    
      
    
      
    
      
    
    

    <ul>
      
        
        



<a  title="Zonal EPOS Integration" href="https://developers.designmynight.com/epos-crm-integrations/zonal-epos-integration/">
	
	Zonal EPOS Integration
</a>

  
      
        
        



<a  title="IBS EPOS Integration" href="https://developers.designmynight.com/epos-crm-integrations/ibs-epos-integration/">
	
	IBS EPOS Integration
</a>

  
      
        
        



<a  title="Tevalis EPOS Integration" href="https://developers.designmynight.com/epos-crm-integrations/tevalis-epos-integration/">
	
	Tevalis EPOS Integration
</a>

  
      
        
        



<a  title="CRM Integration" href="https://developers.designmynight.com/epos-crm-integrations/crm-integration/">
	
	CRM Integration
</a>

  
      
    </ul>
  </li>
  
</li>



<li>
  
    



<a  title="          " href="https://developers.designmynight.com/">
	
	          
</a>

  
  
</li>

        </ul>
        

        
        <hr>
        <span class="section">&#9829; DesignMyNight Tech Team</span>        
        
        <ul>
          

          
          <li>
            <a href="https://github.com/designmynight/dmn-developers" target="_blank" title="@designmynight/dmn-developers on GitHub">
              @designmynight/dmn-developers on GitHub
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Booking API </h1>

			

<div class="admonition note">
<p class="admonition-title">Before you begin</p>
<p>Refer to the <a href="/api-basics">API Basics</a> section to ensure you are familiar with the essentials of how to interact with the API.</p>
</div>

<p>The DesignMyNight Booking API can be used to check venue availability and create a booking, and is suitable for clients who would prefer to implement their own booking process rather than using the <a href="/booking-widget">Booking Widget</a>.</p>

<h2 id="overview">Overview</h2>

<p>Creating a booking through the API consists of two stages:</p>

<ol>
<li>Use the <code>venues</code> API endpoint to check the types of booking that are available and the restrictions for this booking type, and to build up the details of a booking that would be accepted</li>
<li>a) Submit the booking using the <code>bookings</code> API endpoint, <em>or</em>
<br>b) Redirect the customer to the DesignMyNight website to complete their booking</li>
</ol>

<h2 id="checking-availability">Checking availability</h2>

<p>The <code>venues</code> API endpoint provides you with all that you need to present valid booking choices to your users and then check the venue&rsquo;s availability based on those choices. You can post to this endpoint multiple times until you have a booking that would be able to be accepted.</p>

<p>Start by sending a POST request using the ID of the venue you wish to book:</p>

<pre><code class="language-bash">$ curl -X POST https://api.designmynight.com/v4/venues/552435790df6902b7256f237/booking-availability
</code></pre>

<p>You&rsquo;ll get a response like this:</p>

<pre><code class="language-json">{
  &quot;payload&quot;: {
    &quot;valid&quot;: false,
    &quot;validation&quot;: {
      &quot;type&quot;: {...},
      &quot;num_people&quot;: {...},
      &quot;date&quot;: {...},
      &quot;time&quot;: {...},
      &quot;duration&quot;: {...}
    },
    &quot;action&quot;: &quot;reject&quot;,
    &quot;depositRequired&quot;: false,
    &quot;preordersAvailable&quot;: false,
    &quot;bookingDetails&quot;:{
      &quot;venue_id&quot;: &quot;552435790df6902b7256f237&quot;,
      &quot;venue_group&quot;: &quot;5524371d0df690ad7156f2ea&quot;
    }
  },
  &quot;status&quot;: 200,
  &quot;requestTime&quot;: &quot;2016-04-29T10:06:01&quot;,
  &quot;responseTime&quot;: &quot;2016-04-29T10:06:01&quot;,
  &quot;statusText&quot;: &quot;OK&quot;,
  &quot;url&quot;: &quot;/v4/venues/552435790df6902b7256f237/booking-availability&quot;,
  &quot;method&quot;: &quot;POST&quot;,
  &quot;params&quot;: []
}
</code></pre>

<p>You can use the responses from this endpoint to construct a valid booking in whatever order you prefer. Each time you post to it, the response will let you know whether the given booking details are valid, and it will contain details on how to guide your user towards selecting details for a valid booking.</p>

<h3 id="booking-format">Booking format</h3>

<p>A valid booking should contain the following fields:</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>type</code></td>
<td>The ID of the booking type as a string</td>
</tr>

<tr>
<td><code>num_people</code></td>
<td>The number of guests in the booking as an integer</td>
</tr>

<tr>
<td><code>date</code></td>
<td>The date of the booking, in the format YYYY-MM-DD</td>
</tr>

<tr>
<td><code>time</code></td>
<td>The time of the booking in 24-hour format, eg 19:00</td>
</tr>

<tr>
<td><code>duration</code></td>
<td>The duration of the booking in hours as a decimal, eg 1.5</td>
</tr>
</tbody>
</table>

<h3 id="validation">Validation</h3>

<p>The <code>validation</code> key in the returned JSON contains validation details for each required field. For each field, you get an object that consists of the following keys:</p>

<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>valid</td>
<td><code>Boolean</code>: whether the field is valid for the given booking</td>
</tr>

<tr>
<td>errors</td>
<td><code>Error&lt;&gt;</code> If the field is not valid, contains an array of error details</td>
</tr>

<tr>
<td>suggestedValues</td>
<td><code>Array</code> of potential values for the field</td>
</tr>

<tr>
<td>rules:</td>
<td><code>Object</code> describing the validation rules for the field</td>
</tr>
</tbody>
</table>

<h3 id="suggested-values">Suggested values</h3>

<p>With every request, the <code>suggestedValues</code> object within a field&rsquo;s validation details will contain further details of potential values for that field, given the current booking details. For example, if you post a booking type but no other details, the <code>time</code> field will contain possible times for that booking type on any date. If you then post a booking type and a date, the <code>time</code> field will contain suggested values for a booking of that type on that date.</p>

<p>Suggested values contains an array of objects, each describing a potential value for the field. The object contains the following keys:</p>

<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>value</code></td>
<td><code>object</code> or <code>string</code> with the suggested value of the field</td>
</tr>

<tr>
<td><code>valid</code></td>
<td><code>boolean</code> describing whether this value would be valid given the current booking details</td>
</tr>

<tr>
<td><code>message</code></td>
<td><code>string</code> providing further information on the field&rsquo;s restrictions</td>
</tr>

<tr>
<td><code>action</code></td>
<td><code>string</code> (only for <code>time</code>) describing the how the booking would be handled after submission - see <a href="#submitting-the-booking">Submitting the booking</a></td>
</tr>

<tr>
<td><code>offers</code></td>
<td><code>array</code> (only with <code>getOffers=true</code>) See <a href="/offers-api/#offers-in-booking-availability">Offers in Booking Availability</a></td>
</tr>
</tbody>
</table>

<h3 id="validation-rules">Validation rules</h3>

<p>If returned within the <code>validation</code> object, the <code>rules</code> object contains further details on the validation rules that apply for the given field. For example, the <code>num_people</code> field will return a <code>rules</code> object containing a <code>min</code> and a <code>max</code> permitted for this field. These values may be <code>null</code> if no min or max is set.</p>

<h2 id="submitting-the-booking">Submitting the booking</h2>

<p>Once you have booking details that pass the validation, the <code>action</code> key in the availability response will contain a string letting you know what will happen if the booking is submitted. The action may be one of the following:</p>

<table>
<thead>
<tr>
<th>Action</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>accept</td>
<td>The booking will be accepted and automatically confirmed</td>
</tr>

<tr>
<td>enquire</td>
<td>The booking will be processed as an enquiry, and the customer will have to wait for confirmation</td>
</tr>

<tr>
<td>may_enquire</td>
<td>The venue appears to have no availability, but the customer may choose to submit an enquiry anyway</td>
</tr>

<tr>
<td>reject</td>
<td>The booking cannot be accommodated</td>
</tr>
</tbody>
</table>

<h3 id="submitting-through-the-api-or-through-a-web-redirect">Submitting through the API or through a web redirect</h3>

<p>If a booking is valid to be submitted, the response from the <code>booking-availability</code> endpoint will contain a <code>next</code> key, with an object containing web and API URLs that may be used to submit the booking.</p>

<p><strong>Note</strong>: some bookings require additional details from the customer before they can be completed - for example, some bookings will require a payment to be made in order to secure the booking, and others provide the ability to choose and pay for pre-order items before submitting the booking. To store these bookings, you can make a <code>POST</code> request to the /bookings endpoint. <a href="#submitting-to-the-bookings-endpoint">Read more</a></p>

<p>Where these additional details apply, you will not be able to submit the booking through the API, and will instead need to redirect the customer to the given URL in order to complete their booking. Where this applies you can supply a return URL for the customer to be redirected to after their booking has been submitted.</p>

<h3 id="submitting-through-the-api">Submitting through the API</h3>

<p>If an API URL is provided for in the &lsquo;next&rsquo; object, you will need to construct a booking object that contains all of the fields in the <code>bookingDetails</code> object of the successful <code>booking-details</code> API response, as well as the following details:</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>source</code></td>
<td>(optional) <code>string</code> representing the source of the booking: should be &lsquo;partner&rsquo; for any booking from a venue&rsquo;s own app.</td>
</tr>

<tr>
<td><code>first_name</code></td>
<td><code>string</code> the customer&rsquo;s first name</td>
</tr>

<tr>
<td><code>last_name</code></td>
<td><code>string</code> the customer&rsquo;s last name</td>
</tr>

<tr>
<td><code>email</code></td>
<td><code>string</code> the customer&rsquo;s email address</td>
</tr>

<tr>
<td><code>phone</code></td>
<td><code>string</code> the customer&rsquo;s phone number</td>
</tr>

<tr>
<td><code>dob</code></td>
<td>(optional) <code>string</code> the customer&rsquo;s date of birth, in the format YYYY-MM-DD</td>
</tr>

<tr>
<td><code>newsletter_signup</code></td>
<td>(optional) <code>boolean</code> whether the customer opted in to marketing communications</td>
</tr>

<tr>
<td><code>marketing_preferences</code></td>
<td>(optional) <code>array</code> An array of marketing preference IDs the user has agreed to. See <a href="#marketing-preferences">Marketing Preferences</a> for further details</td>
</tr>
</tbody>
</table>

<h3 id="submitting-to-the-bookings-endpoint">Submitting to the /bookings endpoint</h3>

<p>Alternatively you can store bookings and enquiries by making a POST request to the <code>/bookings</code> endpoint. This method will bypass the availability check, allowing you to capture enquiries. This method can also be used for when additional details are required</p>

<p>The following fields should be passed:</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>source</code></td>
<td>Yes</td>
<td><code>string</code> Where the booking is coming from. In most cases, this should be <code>partner</code></td>
</tr>

<tr>
<td><code>first_name</code></td>
<td>Yes</td>
<td><code>string</code> The first name for the booking</td>
</tr>

<tr>
<td><code>last_name</code></td>
<td>Yes</td>
<td><code>string</code> The last name for the booking</td>
</tr>

<tr>
<td><code>num_people</code></td>
<td>Yes</td>
<td><code>integer</code> The number of people the booking is for</td>
</tr>

<tr>
<td><code>type</code></td>
<td>Yes</td>
<td><code>string</code> The ID of the booking type</td>
</tr>

<tr>
<td><code>venue_id</code></td>
<td>Yes</td>
<td><code>string</code> The ID of the venue</td>
</tr>

<tr>
<td><code>date</code></td>
<td>Yes</td>
<td><code>string</code> The date of the booking, in the format YYYY-MM-DD</td>
</tr>

<tr>
<td><code>time</code></td>
<td>Yes</td>
<td><code>string</code> The time of the booking, in the format HH:mm</td>
</tr>

<tr>
<td><code>duration</code></td>
<td>No</td>
<td><code>integer</code> The duration of the booking in minutes</td>
</tr>

<tr>
<td><code>email</code></td>
<td>No</td>
<td><code>string</code> The guest&rsquo;s email address</td>
</tr>

<tr>
<td><code>dob</code></td>
<td>No</td>
<td><code>string</code> The guest&rsquo;s date of birth, in the format YYYY-MM-DD</td>
</tr>

<tr>
<td><code>phone</code></td>
<td>No</td>
<td><code>string</code> The guest&rsquo;s phone number</td>
</tr>

<tr>
<td><code>notes</code></td>
<td>No</td>
<td><code>string</code> Any additional booking notes or special requests</td>
</tr>

<tr>
<td><code>package</code></td>
<td>No</td>
<td><code>string</code> The ID of the booking package this booking has</td>
</tr>

<tr>
<td><code>newsletter_signup</code></td>
<td>No</td>
<td><code>boolean</code> If the customer has agreed to sign up to the DMN newsletter</td>
</tr>

<tr>
<td><code>marketing_preferences</code></td>
<td>No</td>
<td><code>array</code> An array of marketing preference IDs the user has agreed to. See <a href="#marketing-preferences">Marketing Preferences</a> for further details</td>
</tr>

<tr>
<td><code>custom_field_value</code></td>
<td>No</td>
<td><code>string</code> The value for the custom field</td>
</tr>
</tbody>
</table>

<p>Here&rsquo;s an example request of storing an enquiry for 4 people on the 16th March 2018 at 16:00</p>

<pre><code class="language-bash">$ curl -X POST https://api.designmynight.com/v4/bookings
    -d &quot;source=partner&amp;first_name=Dan&amp;last_name=Johnson&amp;num_people=4&amp;venue_id=5853b29b12f78aa33f8b54b6&amp;type=58c927215ee246985eb91b8e&amp;date=2018-03-16&amp;time=16:00&quot;
</code></pre>

<p>The response will look like this:</p>

<pre><code class="language-json">{
  &quot;payload&quot;: {
    &quot;booking&quot;: {
      &quot;_id&quot;: &quot;5aaaf965addee7655b15ace4&quot;,
      &quot;created_date&quot;: &quot;2018-03-15T22:53:25&quot;,
      &quot;created_by&quot;: &quot;58bd9a16dd7d97ef54cef63f&quot;,
      &quot;last_updated&quot;: &quot;2018-03-15T22:53:25&quot;,
      &quot;reference&quot;: &quot;DMN-9980140810&quot;,
      &quot;venue_id&quot;: &quot;5853b29b12f78aa33f8b54b6&quot;,
      &quot;date&quot;: &quot;2018-04-19T00:00:00&quot;,
      &quot;time&quot;: &quot;13:00&quot;,
      &quot;type&quot;: {
        &quot;guestlist&quot;: false,
        &quot;id&quot;: &quot;5922c9ee93f8d541531a49b3&quot;,
        &quot;name&quot;: &quot;Lunch&quot;,
        &quot;private_hire&quot;: false
      },
      &quot;num_people&quot;: 8,
      &quot;first_name&quot;: &quot;Dan&quot;,
      &quot;last_name&quot;: &quot;Johnson&quot;,
      &quot;email&quot;: null,
      &quot;notes&quot;: null,
      &quot;source&quot;: &quot;partner&quot;,
      &quot;packages&quot;: null,
      &quot;offer&quot;: null,
      &quot;deposits&quot;: []
    },
    &quot;bookingStatus&quot;: &quot;received&quot;,
    &quot;venue&quot;: {
      &quot;type&quot;: &quot;venue&quot;,
      &quot;title&quot;: &quot;Test Venue&quot;,
      &quot;path&quot;: &quot;\/london\/bars\/shoreditch\/test-venue&quot;,
      &quot;page_type&quot;: &quot;venue&quot;
    }
  },
  &quot;status&quot;: 200,
  &quot;requestTime&quot;: &quot;2018-03-15T22:53:24&quot;,
  &quot;responseTime&quot;: &quot;2018-03-15T22:53:40&quot;,
  &quot;statusText&quot;: &quot;OK&quot;,
  &quot;url&quot;: &quot;\/api\/v4\/bookings&quot;,
  &quot;method&quot;: &quot;POST&quot;,
  &quot;params&quot;: []
}
</code></pre>

<h3 id="submitting-through-the-web">Submitting through the web</h3>

<p>If you want or need to submit a booking through the web URL, you should direct the customer to the <strong>web</strong> part of the <code>next</code> object, optionally appending a <code>return_url</code> field containing a URL that the customer should be directed to once their booking has been submitted.</p>

<p>If this is used, the following details of the submitted booking will be appended to the return URL, and you should handle displaying the confirmation to the customer.</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>reference</td>
<td>The booking reference</td>
</tr>

<tr>
<td>status</td>
<td>The status of the booking: &lsquo;complete&rsquo; for confirmed bookings; otherwise this is an enquiry</td>
</tr>

<tr>
<td><code>first_name</code></td>
<td><code>string</code> the customer&rsquo;s first name</td>
</tr>

<tr>
<td><code>last_name</code></td>
<td><code>string</code> the customer&rsquo;s last name</td>
</tr>

<tr>
<td><code>email</code></td>
<td><code>string</code> the customer&rsquo;s email address</td>
</tr>
</tbody>
</table>

<h2 id="updating-an-existing-booking">Updating an existing booking</h2>

<p>An existing booking can be updated by making a <code>POST</code> request to the bookings API using the <code>/bookings/BOOKING_ID</code> endpoint, providing you have the ID of the booking you wish to update. The following example will update the status of a booking to <code>in_progress</code>.</p>

<pre><code class="language-bash">$ curl -X POST https://api.designmynight.com/v4/bookings/5b7e8070addee7612f456972
  -d &quot;status=in_progress&quot;
</code></pre>

<p>You will receive a response with the newly updated booking, similar to this:</p>

<pre><code class="language-json">{
  &quot;payload&quot;: {
    &quot;booking&quot;: {
      &quot;_id&quot;: &quot;5b7e8070addee7612f456972&quot;,
      &quot;created_date&quot;: &quot;2018-08-23T10:37:52&quot;,
      &quot;last_updated&quot;: &quot;2018-08-28T21:19:32&quot;,
      &quot;booking_id&quot;: 123456,
      &quot;source&quot;: &quot;admin&quot;,
      &quot;created_by&quot;: &quot;5b7c2ba5addee77dbd517012&quot;,
      &quot;assigned_to&quot;: &quot;5b7c2ba5addee77dbd517012&quot;,
      &quot;completed_by&quot;: &quot;5b7c2ba5addee77dbd517012&quot;,
      &quot;completed_date&quot;: &quot;2018-08-23T10:37:52&quot;,
      &quot;status_changed_date&quot;: &quot;2018-08-28T21:19:32&quot;,
      &quot;managed_by_venue&quot;: true,
      &quot;invoiced&quot;: false,
      &quot;reconciled&quot;: false,
      &quot;status&quot;: &quot;in_progress&quot;,
      &quot;walk_in&quot;: true,
      &quot;venue_id&quot;: &quot;5596b23a0c23efff286f2b29&quot;,
      &quot;venue_group&quot;: &quot;55a810f1c087b36d316e7f4b&quot;,
      &quot;region&quot;: &quot;512b1ebad5d190d2978c277e&quot;,
      &quot;date&quot;: &quot;2018-08-23T00:00:00&quot;,
      &quot;time&quot;: &quot;14:30&quot;,
      &quot;duration&quot;: 90,
      &quot;num_people&quot;: 3,
      &quot;type&quot;: {
        &quot;guestlist&quot;: false,
        &quot;id&quot;: &quot;58c927215ee246985eb91b8e&quot;,
        &quot;name&quot;: &quot;Drinks&quot;,
        &quot;value&quot;: 0,
        &quot;private_hire&quot;: false
      },
      &quot;value&quot;: 0
    }
  },
  &quot;status&quot;: 200,
  &quot;requestTime&quot;: &quot;2018-08-28T21:19:32&quot;,
  &quot;responseTime&quot;: &quot;2018-08-28T21:19:32&quot;,
  &quot;statusText&quot;: &quot;OK&quot;,
  &quot;url&quot;: &quot;\/v4\/bookings\/5b7e8070addee7612f456972&quot;,
  &quot;method&quot;: &quot;POST&quot;,
  &quot;params&quot;: []
}
</code></pre>

<p>The supported statuses are described <a href="/api/bookings-search#status-filter-format">here</a></p>

<h2 id="marketing-preferences">Marketing Preferences</h2>

<p>The marketing preferences defined for a venue/venue group can be retrieved using the venues endpoint. Each preference has a unique ID.</p>

<h3 id="getting-marketing-preferences">Getting marketing preferences</h3>

<p>The following <code>GET</code> request will return an array of marketing preferences that have been defined on the venue/venue group. Replace the ID in the URL with your Venue ID.</p>

<pre><code class="language-bash">$ curl -X GET https://api.designmynight.com/v4/venues/552435790df6902b7256f237/marketing-preferences
</code></pre>

<p>If the venue has marketing preferences defined, you will receive a response similar to this:</p>

<pre><code class="language-json">{
  &quot;payload&quot;: {
    &quot;marketing_preferences&quot;: [
      {
        &quot;id&quot;: &quot;486847581541665&quot;,
        &quot;created_date&quot;: &quot;2018-05-29T10:57:00&quot;,
        &quot;name&quot;: &quot;Email&quot;,
        &quot;description&quot;: &quot;I am happy to be contacted by email for promotions&quot;
      },
      {
        &quot;id&quot;: &quot;864778487282768&quot;,
        &quot;created_date&quot;: &quot;2018-05-29T10:57:00&quot;,
        &quot;name&quot;: &quot;SMS&quot;,
        &quot;description&quot;: &quot;I am happy receive special offers by SMS&quot;
      },
      {
        &quot;id&quot;: &quot;5878286768853523&quot;,
        &quot;created_date&quot;: &quot;2018-05-29T10:57:00&quot;,
        &quot;name&quot;: &quot;Post&quot;,
        &quot;description&quot;: &quot;I am happy to be sent marketing information in the post&quot;
      }
    ]
  }
}
</code></pre>

<h3 id="setting-marketing-preferences-for-a-booking">Setting marketing preferences for a booking</h3>

<p>When sending a new booking to the API, you can pass in the ID of each marketing preference the user has consented to.</p>

<p>For example, if a user has agreed to receive marketing via Email and Post:</p>

<pre><code class="language-bash">$ curl -X POST https://api.designmynight.com/v4/bookings
    -d &quot;source=partner&amp;first_name=Dan&amp;last_name=Johnson&amp;num_people=4&amp;venue_id=552435790df6902b7256f237&amp;type=58c927215ee246985eb91b8e&amp;date=2018-05-30&amp;time=16:00&amp;marketing_preferences[]=486847581541665&amp;marketing_preferences[]=5878286768853523&quot;
</code></pre>

<h2 id="assigned-area-information">Assigned area information</h2>

<h3 id="getting-assigned-area-details">Getting assigned area details</h3>

<p>The following <code>GET</code> request will return an array of areas assigned to the booking. Replace the ID in the URL with your Booking ID.</p>

<pre><code class="language-bash">$ curl -X GET https://api.designmynight.com/v4/bookings/5b7e8070addee7612f456972/areas
</code></pre>

<p>If the booking has assigned areas, you will recieve a response like this</p>

<pre><code class="language-json">{
  &quot;payload&quot;: {
    &quot;areas&quot;: [
      {
        &quot;id&quot;: &quot;5b4766db8264ee22a13db576&quot;,
        &quot;name&quot;: &quot;Table 4&quot;,
        &quot;zone&quot;: &quot;5b4766e58264ee22a13db583&quot;
      }
    ]
  }
}
</code></pre>

<h3 id="setting-assigned-areas">Setting assigned areas</h3>

<p>You can update the assigned areas of a booking by posting an array of area ids to assign the booking to. This will overwrite any previously assigned areas.</p>

<pre><code class="language-bash">$ curl -X POST https://api.designmynight.com/v4/bookings/5b7e8070addee7612f456972/areas \
  -H &quot;Content-Type: application/json&quot; \
  -d '{&quot;areas&quot;: [&quot;5b4766db8264ee22a13db573&quot;, &quot;5b4766db8264ee22a13db574&quot;]}'
</code></pre>

<h2 id="checking-booking-rules">Checking Booking Rules</h2>

<p>The <code>booking-rules</code> endpoint will provide the rules for a booking for a specified date and booking type.
The following details must be passed in as a URL parameter:</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>type</code></td>
<td><strong>Yes</strong></td>
<td>The ID of the booking type as a string</td>
</tr>

<tr>
<td><code>date</code></td>
<td><strong>Yes</strong></td>
<td>The date of the booking in YYYY-MM-DD format</td>
</tr>
</tbody>
</table>

<p>The following fields will be provided, based on the date and booking type passed in:</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>bookings_from</code></td>
<td><code>string</code> the earliest time bookings are allowed, in 24 hour format eg <code>09:00</code></td>
</tr>

<tr>
<td><code>bookings_to</code></td>
<td><code>string</code> the latest time bookings are allowed, in 24 hour format eg <code>23:00</code></td>
</tr>

<tr>
<td><code>booking_available</code></td>
<td><code>boolean</code> Whether or not a booking would be allowed, based on the <code>Can Book</code> checkbox in Collins</td>
</tr>

<tr>
<td><code>max_duration</code></td>
<td><code>integer</code> The maximum duration for a booking in minutes *</td>
</tr>

<tr>
<td><code>booking_notes</code></td>
<td><code>string</code> The &lsquo;Bookings Policy&rsquo; message</td>
</tr>

<tr>
<td><code>min_people</code></td>
<td><code>number</code> The minumum number of guests allowed *</td>
</tr>

<tr>
<td><code>max_people</code></td>
<td><code>number</code> The maximum number of guests allowed *</td>
</tr>

<tr>
<td><code>bookings_shut</code></td>
<td><code>string</code> The time when same day bookings close *</td>
</tr>
</tbody>
</table>

<p><small> * These fieldswill only be present when they have been set in Collins</small></p>

<p>For example, to check the rules for a Brunch booking type on the 8th March 2018, the request would look like this:</p>

<pre><code class="language-bash">$ curl -X POST https://api.designmynight.com/v4/venues/552435790df6902b7256f237/booking-rules?type=58d122ba566b8a3c198b45aa&amp;date=2018-03-08
</code></pre>

<p>and the response would look like this</p>

<pre><code class="language-json">{
  &quot;payload&quot;: {
    &quot;bookings_from&quot;: &quot;08:00&quot;,
    &quot;bookings_to&quot;: &quot;21:00&quot;,
    &quot;booking_available&quot;: true,
    &quot;booking_notes&quot;: &quot;Please read the terms and conditions&quot;,
    &quot;bookings_shut&quot;: &quot;09:00&quot;,
    &quot;min_people&quot;: 2,
    &quot;max_people&quot;: 6,
    &quot;max_duration&quot;: 90
  },
  &quot;status&quot;: 200,
  &quot;requestTime&quot;: &quot;2016-04-29T10:06:01&quot;,
  &quot;responseTime&quot;: &quot;2016-04-29T10:06:01&quot;,
  &quot;statusText&quot;: &quot;OK&quot;,
  &quot;url&quot;: &quot;/v4/venues/552435790df6902b7256f237/booking-availability&quot;,
  &quot;method&quot;: &quot;POST&quot;,
  &quot;params&quot;: []
}
</code></pre>

			
			<aside class="copyright" role="note">
				
				&copy; 2019 DesignMyNight &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">
					Material
				</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://developers.designmynight.com/api/event-guests-api/" title="Event Guests API">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Event Guests API
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://developers.designmynight.com/" title="Introduction">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Introduction
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>




			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="https://developers.designmynight.com/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(headers.length > 0) {
        for(var i = 0; i < headers.length; i++) {
          var li = document.createElement("li");
          li.setAttribute("class", "anchor");

          var a  = document.createElement("a");
          a.setAttribute("href", "#" + headers[i].id);
          a.setAttribute("title", headers[i].innerHTML);
          a.innerHTML = headers[i].innerHTML;
          
          li.appendChild(a)
          scrollspy.appendChild(li);
        }
      } else {
        scrollspy.parentElement.removeChild(scrollspy)
      }
      

      /* Add permanent link next to the headers */
      var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

      for(var i = 0; i < headers.length; i++) {
          var a = document.createElement("a");
          a.setAttribute("class", "headerlink");
          a.setAttribute("href", "#" + headers[i].id);
          a.setAttribute("title", "Permanent link")
          a.innerHTML = "#";
          headers[i].appendChild(a);
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-12385609-13', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="https://developers.designmynight.com/javascripts/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>